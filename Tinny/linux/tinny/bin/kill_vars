#! /usr/bin/perl -w -s

our($skip,$d);

if ( ! defined $skip ) {
    print STDERR "Usage: $0 [-d=delimiter] -skip=skip_list\n";
    exit(1);
}

defined $d or $d = "\t";

# read the index file

open( INDEX, "$skip" ) or die "$!: $skip";

my %index_hash = ();

while ( <INDEX> ) {

    chomp;
    $index_hash{$_} = 1;

}

close(INDEX);

# filtering out

while ( <> ) {

    chomp;
    my @data = split /${d}/;

    my @output = ();

    for ( my $i = 0; $i < @data; ++$i ) {

	my $ix = $i + 1;

	if ( ! defined $index_hash{ $ix } ) {
	    push(@output,$data[$i]);
	}

    }

    $" = "$d";
    print "@output\n";

}
